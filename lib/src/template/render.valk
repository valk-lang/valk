
use json
use fs

+ class RenderOptions {
    sanitize: ?fn(String)(String) (null)
    template_directory: ?String (null)
}

+ fn render(path: String, data: $T, options: ?RenderOptions (null)) String !FileNotFound {
    let d = json:value(data)
    let content = fs:read(path) ! throw FileNotFound, "File not found: " + path
    let p = Parser{
        path: path
        content: content
        data: d
        options: options
    }
    return p.render()
}
