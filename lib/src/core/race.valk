
shared rlock : MutexStruct[void] (@undefined)
global has_race_lock : bool (@undefined)

+ fn race_lock() {
    if has_race_lock : return
    rlock.lock()
    has_race_lock = true
}
+ fn race_unlock() {
    if !has_race_lock : return
    has_race_lock = false
    rlock.unlock()
}

