
fn clone_value[T](value: T) T {
    #if is_nullable_type(T)
    if value == null : return null
    #end
    #if !is_structural_type(T)
    return value
    #else
    // Structure types
    let new_ob = T {
    #loop properties value as prop, PT
        prop: clone_value[PT](prop)
    #end
    }
    return new_ob
    #end
}
