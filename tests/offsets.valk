
test "Offsets: Array" {
    let arr = Array[uint].new()
    arr.push(0)
    arr.push(2)
    arr.push(4)

    assert(arr[0] == 0)
    assert(arr[1] == 2)
    assert(arr[2] == 4)
    assert(arr[3] == 0)
    assert((arr[3] ? 10) == 10)
    assert((arr[3] ? <{
        return 11
    }) == 11)

    arr[0] = 5
    arr[3] = 6
    arr[5] = 10
    assert(arr[0] == 5)
    assert(arr[3] == 6)
    assert(arr[5] == 0)
}

test "Offsets: Map" {
    let m = Map[uint].new()
    m.set("a", 0)
    m.set("b", 2)
    m.set("c", 4)

    assert(m["a"] == 0)
    assert(m["b"] == 2)
    assert(m["c"] == 4)
    assert(m["d"] == 0)

    m["a"] = 5
    m["d"] = 6
    assert(m["a"] == 5)
    assert(m["d"] == 6)
    assert(m["e"] == 0)
}
