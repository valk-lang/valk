
macro array_test optional("[" s T:t1 s "]") "{" repeat(items, ws V:v1 ws optional(",") ws, "}")
<{
	#if is_identifier(t1)
	let a = Array[t1].new()
	#else
	let a = Array.new()
	#end
	#loop macro_values items as item
	a.push(item.v1)
	#end
	return a
}

test "Macro" {
    let arr = array_test[String]{}
    assert(arr.length == 0)
    arr = array_test[String]{ "a", "b", "c" }
    assert(arr.length == 3)
}
