
use valk:markdown

test "Markdown" {

    let basic_md = "
# Headers

# h1 Heading 8-)
## h2 Heading
### h3 Heading
#### h4 Heading
##### h5 Heading
###### h6 Heading

Alternatively, for H1 and H2, an underline-ish style:

Alt-H1
======

Alt-H2
------

------

# Emphasis

Emphasis, aka italics, with *asterisks* or _underscores_.

Strong emphasis, aka bold, with **asterisks** or __underscores__.

Combined emphasis with **asterisks and _underscores_**.

Strikethrough uses two tildes. ~~Scratch this.~~

**This is bold text**

__This is bold text__

*This is italic text*

_This is italic text_

~~Strikethrough~~
"

    let basic_expect = "
<h1>Headers</h1>
<h1>h1 Heading 8-)</h1>
<h2>h2 Heading</h2>
<h3>h3 Heading</h3>
<h4>h4 Heading</h4>
<h5>h5 Heading</h5>
<h6>h6 Heading</h6>
<p>Alternatively, for H1 and H2, an underline-ish style:</p>
<h1>Alt-H1</h1>
<h2>Alt-H2</h2>
<p>------</p>
<h1>Emphasis</h1>
<p>Emphasis, aka italics, with <em>asterisks</em> or _underscores_.</p>
<p>Strong emphasis, aka bold, with <strong>asterisks</strong> or <strong>underscores</strong>.</p>
<p>Combined emphasis with <strong>asterisks and _underscores_</strong>.</p>
<p>Strikethrough uses two tildes. <del>Scratch this.</del></p>
<p><strong>This is bold text</strong></p>
<p><strong>This is bold text</strong></p>
<p><em>This is italic text</em></p>
<p>_This is italic text_</p>
<p><del>Strikethrough</del></p>"

    let list_md = "
* Unordered list can use asterisks
- Or minuses
+ Or pluses

1. Make my changes
    1. Fix bug
    2. Improve formatting
2. Push my commits to GitHub
3. Open a pull request
    * Describe my changes
    * Mention all the members of my team
        * Ask for feedback
"

    let list_expect = "
<ul>
  <li>Unordered list can use asterisks</li>
</ul>
<ul>
  <li>Or minuses</li>
</ul>
<ul>
  <li>Or pluses</li>
</ul>
<ol>
  <li>
  <p>Make my changes</p>
  <ol>
    <li>Fix bug</li>
    <li>Improve formatting</li>
  </ol>
  </li>
  <li>Push my commits to GitHub</li>
  <li>
  <p>Open a pull request</p>
  <ul>
    <li>Describe my changes</li>
    <li>
    <p>Mention all the members of my team</p>
    <ul>
      <li>Ask for feedback</li>
    </ul>
    </li>
  </ul>
  </li>
</ol>"

    // Run tests
    let html = markdown:to_html(basic_md)
    assert(html == basic_expect)
    html = markdown:to_html(list_md)
    assert(html == list_expect)
}
