
#if OS == linux
extern global errno : i32;
#elif OS == macos
extern shared errno : i32;
#end
extern fn malloc(size: uint) ptr;
extern fn free(adr: ptr);

test "Extern token" {
    let adr = malloc(8)
    @ptrv(adr, u64) = 5
    free(adr)
    #if OS == linux || OS == macos
    assert(errno == 0)
    #end
}
