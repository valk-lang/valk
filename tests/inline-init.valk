
struct IIS1 {
    v1: <IIS2> ({ v: 5 })
    v2: <IIS2> ({ v: 10 })
    v3: <IIS2>
    v4: uint (20)
}
struct IIS2 {
    v: int
}
class InlineInit {
    v: <IIS1>
}

test "Inline init" {

    let v1 = InlineInit {
        v: { v3: { v: 15 } }
    }
    let v2 : <IIS1> = {
        v3: { v: 16 }
    }

    assert(v1.v.v1.v == 5)
    assert(v1.v.v2.v == 10)
    assert(v1.v.v3.v == 15)
    assert(v1.v.v4 == 20)

    assert(v2.v1.v == 5)
    assert(v2.v2.v == 10)
    assert(v2.v3.v == 16)
    assert(v2.v4 == 20)
}
