
use valk:template
use valk:fs

test "Templates" {

    let data = object { 
        title: "Hello"
        content: object {
            msg: "World"
        }
    }

    let vdir = __DIR__ + "/assets/views"
    let options = template:RenderOptions {
        template_directory: vdir
    }
    let result = template:render_path(vdir + "/pages/test-page.html", data, options) !? EMSG
    let expect = fs:read(vdir + "/expect/result-1.html") !? "-?-"

    assert(result == expect)
}